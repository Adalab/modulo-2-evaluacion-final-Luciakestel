{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst charactersList = document.querySelector('.js_character_list');\nconst favouriteList = document.querySelector('.js_favourite_list');\nconst btn = document.querySelector('.js_btn');\nconst input = document.querySelector('.js_input');\nconst btnFav = document.querySelector('.js_fav_btn');\n\n\nlet characters = [];\nlet favCharacters = [];\n\nfetch('https://breakingbadapi.com/api/characters')\n.then(response => response.json())\n.then(dataResults =>{\n    characters = dataResults;\n    renderCharacters();\n    renderFavSaved();\n});\n\nfunction renderFavSaved(){\n  const favCharacterSave = JSON.parse(localStorage.getItem('Favourite list'));\n  if (favCharacterSave !== null){\n    favCharacters = favCharacterSave;\n    renderFavCharacters();\n  }\n}\n\nfunction renderCharacters(){\n    let html = '';\n    for (const character of characters) {\n      const characterFavIndex = favCharacters.findIndex((eachCharacterObj) => eachCharacterObj.char_id === character.char_id);\n      let classFav = '';  \n      if (characterFavIndex === -1){\n        classFav = '';\n        } else {\n          classFav = 'selected';\n        }\n        html += `<li >\n        <article class=\"js_list_element article ${classFav}\" id='${character.char_id}'>\n          <h3 class=\"article_title\">${character.name}</h3>\n          <img src=\"${character.img}\" alt=\"Foto del personaje\" class=\"article_img\">\n          <p class=\"article_status\">${character.status}</p>\n        </article>\n      </li>`;\n    \n    }\n    charactersList.innerHTML = html;\n    \n    const listElement = document.querySelectorAll('.js_list_element');\n\n    for (const character of listElement) {\n      character.addEventListener(('click'), handleClickCharacter);\n    }\n}\n\nfunction handleClickCharacter(event){\n    event.currentTarget.classList.toggle('selected');\n    console.log('he entrado');\n    const selectedCharacter = characters.find((eachCharacterObj) => eachCharacterObj.char_id === parseInt(event.currentTarget.id));\n    \n    const characterFav = favCharacters.findIndex((eachCharacterObj) => eachCharacterObj.char_id === parseInt(event.currentTarget.id));\n    if(characterFav === -1){\n      favCharacters.push(selectedCharacter);\n    } else {\n      favCharacters.splice(characterFav, 1);\n    }\n    \n    renderFavCharacters();\n}\nfunction searchCharacters(event){\nevent.preventDefault();\nconst searchValue = input.value;\nfetch(`https://breakingbadapi.com/api/characters?name=${searchValue}`)\n.then(response => response.json())\n.then(dataResults =>{\n    characters = dataResults;\n    renderCharacters();\n});\n}\n\nfunction renderFavCharacters(){\n    let html = '';\n    for (const favCharacter of favCharacters) {\n        html += `<li>\n        <article class=\"article selected\" id='${favCharacter.char_id}'>\n          <div class=\"article_box\">  \n            <h3 clas=\"article_title\">${favCharacter.name}</h3>\n            <div class=\"article_close js_close\" id='${favCharacter.char_id}'></div>\n          </div>\n          <img src=\"${favCharacter.img}\" alt=\"Foto del personaje\" class=\"article_img\"> \n          <p class=\"article_status\">${favCharacter.status}</p>\n        </article>\n      </li>`;\n    }\n    favouriteList.innerHTML = html;\n    localStorage.setItem('Favourite list', JSON.stringify(favCharacters));\n    \n    const btncloseFav = document.querySelectorAll('.js_close');\n    for (const buttonFav of btncloseFav) {\n      buttonFav.addEventListener(('click'), closeFav);\n    }\n  }\n\nfunction closeFav(event){\n  event.preventDefault();\n  console.log('clickando en icono close');\n  const closeFavCharacterIndex = favCharacters.findIndex((eachCloseObj) => eachCloseObj.char_id === parseInt(event.currentTarget.id));\n  console.log(parseInt(event.currentTarget.id));\n  if (closeFavCharacterIndex !== -1) {\n    favCharacters.splice(closeFavCharacterIndex, 1);\n  }\n  renderCharacters();\n  renderFavCharacters();\n}\n\nfunction resetFavs(event){\n  event.preventDefault();\n  let html = '';\n  favouriteList.innerHTML = html;\n  favCharacters = [];\n  localStorage.removeItem('Favourite list');\n  renderCharacters();\n}\n\nbtn.addEventListener(('click'), searchCharacters);\nbtnFav.addEventListener(('click'), resetFavs);\n\n"]}