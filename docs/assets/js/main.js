"use strict";const charactersList=document.querySelector(".js_character_list"),favouriteList=document.querySelector(".js_favourite_list"),btn=document.querySelector(".js_btn"),input=document.querySelector(".js_input"),btnFav=document.querySelector(".js_fav_btn");let characters=[],favCharacters=[];function renderFavSaved(){const e=JSON.parse(localStorage.getItem("Favourite list"));null!==e&&(favCharacters=e,renderFavCharacters())}function renderCharacters(){let e="";for(const t of characters){let r="";r=-1===favCharacters.findIndex(e=>e.char_id===t.char_id)?"":"selected",e+=`<li >\n        <article class="js_list_element article ${r}" id='${t.char_id}'>\n          <h3 class="article_title">${t.name}</h3>\n          <img src="${t.img}" alt="Foto del personaje" class="article_img">\n          <p class="article_status">${t.status}</p>\n        </article>\n      </li>`}charactersList.innerHTML=e;const t=document.querySelectorAll(".js_list_element");for(const e of t)e.addEventListener("click",handleClickCharacter)}function handleClickCharacter(e){e.currentTarget.classList.toggle("selected"),console.log("he entrado");const t=characters.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?favCharacters.push(t):favCharacters.splice(r,1),renderFavCharacters()}function searchCharacters(e){e.preventDefault();const t=input.value;fetch("https://breakingbadapi.com/api/characters?name="+t).then(e=>e.json()).then(e=>{characters=e,renderCharacters()})}function renderFavCharacters(){let e="";for(const t of favCharacters)e+=`<li>\n        <article class="article selected" id='${t.char_id}'>\n          <div class="article_box">  \n            <h3 clas="article_title">${t.name}</h3>\n            <div class="article_close js_close" id='${t.char_id}'></div>\n          </div>\n          <img src="${t.img}" alt="Foto del personaje" class="article_img"> \n          <p class="article_status">${t.status}</p>\n        </article>\n      </li>`;favouriteList.innerHTML=e,localStorage.setItem("Favourite list",JSON.stringify(favCharacters));const t=document.querySelectorAll(".js_close");for(const e of t)e.addEventListener("click",closeFav)}function closeFav(e){e.preventDefault(),console.log("clickando en icono close");const t=favCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));console.log(parseInt(e.currentTarget.id)),-1!==t&&favCharacters.splice(t,1),renderCharacters(),renderFavCharacters()}function resetFavs(e){e.preventDefault();favouriteList.innerHTML="",favCharacters=[],localStorage.removeItem("Favourite list"),renderCharacters()}fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{characters=e,renderCharacters(),renderFavSaved()}),btn.addEventListener("click",searchCharacters),btnFav.addEventListener("click",resetFavs);